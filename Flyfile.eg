paths = {
   html = {
      "src/*.html"
   }
   css = {
      "src/css/*.css"
   }
   bundle = {
      "src/*.eg"
   }
}

require: earlify

provide: default, clear, html, css, bundle

gen default = ->
   yield this.tasks.clear()
   yield this.tasks.html()
   yield this.tasks.css()
   yield this.tasks.bundle()

gen clear = ->
   yield this.clear("index.html")
   yield this.clear("index.js")
   yield this.clear("all.css")

gen html = ->
   yield chain this:
      @source: paths.html
      @target: "."

gen css = ->
   yield chain this:
      @source: paths.css
      @concat: "all.css"
      @target: "."

gen bundle = ->
   yield chain this:
      @source: paths.bundle
      @browse: { transform = {earlify} }
      ;;@uglify:
      @concat: "index.js"
      @target: "."
